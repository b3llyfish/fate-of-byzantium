on_game_start = {
	on_actions = {
		add_horse_lord_oghuz
		disable_seljuk_byzantium_invasion
		add_bonus_rum_troops
		fix_rum_anatolia_kingdom
		remove_maa_increase
		add_depressed_emperor_1178
		add_byz_title_troops
		resolve_armenia_war
		add_sultan_rum_trait
		add_turkmen_innovation_mangonel
		admin_asia
	}
}

admin_asia = {
	effect = {
		if = {
			limit = {
				NOT = { has_dlc_feature = all_under_heaven }
			}
			admin_china_effect = yes
			admin_japan_effect = yes
			admin_korea_effect = yes
		}
	}
}

add_horse_lord_oghuz = {
	effect = {
		if = {
			limit = {
				NOT = {
					has_dlc_feature = khans_of_the_steppe
				}
			}
			# assumed to be incorrectly removed by pdox
			culture:turkish = { add_culture_tradition = tradition_horse_lords }
		}
	}
}

disable_seljuk_byzantium_invasion = {
	effect = {
		if = {
			limit = {
				game_start_date = 1178.10.1 # prevent trigger if rum exists at the game start date
			}
			set_global_variable = {
				name = seljuk_byzantium_invasion_happened
				value = yes
			}
		}
	}
}

add_bonus_rum_troops = {
	effect = {
		if = {
			limit = {
				game_start_date = 1178.10.1
			}
			title:k_rum.holder = {
				create_rum_1187_maa_effect = yes
			}
		}
	}
}

fix_rum_anatolia_kingdom = {
	effect = {
		if = {
			limit = {
				game_start_date = 1178.10.1
			}
			rum_de_jure_duchies_effect = yes
		}
	}
}

remove_maa_increase = {
	effect = {
		if = {
			limit = {
				game_start_date = 1178.10.1
			}
			title:e_byzantium.holder = {
				random_maa_regiment = {
					limit = { is_maa_type = varangian_guards }
					change_maa_regiment_size = {
						size = -5
					}
				}
			}
		}
	}
}

add_depressed_emperor_1178 = {
	effect = {
		if = {
			limit = {
				game_start_date = 1178.10.1
			}
			title:e_byzantium.holder = {
				add_trait = depressed_1
			}
		}
	}
}

add_byz_title_troops = {
	effect = {
		if = {
			limit = {
				game_start_date = 867.1.1
			}
			title:e_byzantium.holder = {
				create_maa_regiment = {
					type = skoutatoi
					check_can_recruit = no
					title = title:e_byzantium
					size = 2
				}
				create_maa_regiment = {
					type = cataphract
					check_can_recruit = no
					title = title:e_byzantium
					size = 1
				}
				create_maa_regiment = {
					type = akritai
					check_can_recruit = no
					title = title:e_byzantium
					size = 2
				}
				create_maa_regiment = {
					type = ballistrai
					check_can_recruit = no
					title = title:e_byzantium
					size = 2
				}
			}
		}
		if = {
			limit = {
				game_start_date = 1066.9.15
			}
			title:e_byzantium.holder = {
				create_maa_regiment = {
					type = skoutatoi
					check_can_recruit = no
					title = title:e_byzantium
					size = 3
				}
				create_maa_regiment = {
					type = cataphract
					check_can_recruit = no
					title = title:e_byzantium
					size = 2
				}
				create_maa_regiment = {
					type = akritai
					check_can_recruit = no
					title = title:e_byzantium
					size = 3
				}
				create_maa_regiment = {
					type = ballistrai
					check_can_recruit = no
					title = title:e_byzantium
					size = 3
				}
			}
		}
		if = {
			limit = {
				game_start_date = 1178.10.1
			}
			title:e_byzantium.holder = {
				create_maa_regiment = {
					type = skoutatoi
					check_can_recruit = no
					title = title:e_byzantium
					size = 5
				}
				create_maa_regiment = {
					type = cataphract
					check_can_recruit = no
					title = title:e_byzantium
					size = 4
				}
				create_maa_regiment = {
					type = akritai
					check_can_recruit = no
					title = title:e_byzantium
					size = 5
				}
				create_maa_regiment = {
					type = ballistrai
					check_can_recruit = no
					title = title:e_byzantium
					size = 5
				}
			}
		}
	}
}

resolve_armenia_war = {
	effect = {
		if = {
			limit = {
				game_start_date = 1066.9.15
				OR = {
					has_game_rule = invasion_armenia_seljuk_victory
					has_game_rule = invasion_armenia_byz_victory
				}
			}
			title:e_persia.holder = {
				random_character_war = {
					limit = { using_cb = claim_cb }
					if = {
						limit = {
							has_game_rule = invasion_armenia_seljuk_victory
						}
						end_war = attacker
					}
					else_if = {
						limit = {
							has_game_rule = invasion_armenia_byz_victory
						}
						end_war = defender
					}
				}
			}
		}
	}
}

add_sultan_rum_trait = {
	effect = {
		if = {
			limit = {
				game_start_date = 1178.10.1
			}
			title:k_rum.holder = {
				add_sultan_rum_trait_effect = yes
			}
		}
	}
}

add_turkmen_innovation_mangonel = {
	effect = {
		culture:turkmen = {
			add_innovation = innovation_mangonel
		}
	}
}